{
  "hash": "420939f0f221efb9457aeb646eeb31e8",
  "result": {
    "markdown": "---\ntitle: \"Titre de votre page d'importation\"\ntitle-block-banner: true\ndescription: | \n  Petite description de cette page.\n# à changer\ndate: \"2022-12-21\"\n# Modifier les détails que vous voulez\nauthor:\n  - name: \"Amy Vallières\"\n    # Votre site web perso ou github\n    url: https://github.com/VOTREUSERNAME\n    # les champs d'affiliation sont optionnels, vous pouvez les\n    # comment out en ajoutant un # devant.\n    affiliation: FAS1002\n    affiliation-url: https://FAS1002.github.io/A22\n    # changer pour votre propre orcid id\n    # https://orcid.org/ pour vous inscrire.\n    orcid: 0000-0000-0000-0000\n\n# TRUE == Générer une citation pour cette page précise. Pour enlever, mettre false.\ncitation: true\n# Inclure les références que vous utilisez dans vos rapports. Je conseille Zotero pour construire\n# ce fichier ou de connecter RStudio directement pour pouvoir citer avec @nom-de-reference.\nbibliography: references.bib\n---\n\n\nIl est maintenant le temps de décrire votre projet avant de passer au document suivant, soit l'importation et la manipulation des données.\n\nJe vous conseille d'écrire cette partie en dernier, une fois que vous aurez déjà vos résultats et figures afin d'éviter de réécrire cette page plusieurs fois.\n\n::: callout-important\nN'oubliez pas d'inclure vos références sur chacune des pages!\n:::\n\nPar exemple:\n\n> Les données proviennent entre autres de @owidenergy.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(fs)\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLe chargement a nécessité le package : timechange\n\nAttachement du package : 'lubridate'\n\nLes objets suivants sont masqués depuis 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(skimr)\nlibrary(countrycode)\nlibrary(gsheet)\nlibrary(httr)\n```\n:::\n\n\n**\\### Les données *Our World in Data***\n\nJ'utilise en premier la banque de données du \\\\\\*Co2 and Greenhouse Gaz Emissions\\\\\\*. Celle-ci sera mis à jour à tous les jours.\n\nLes données proviennent de : https://raw.githubusercontent.com/owid/co2-data/master/owid-co2-data.csv).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource(\"helper.R\")\ndata_co2 <- get_raw_data()\n```\n:::\n\n\n### Les données *Gapminder*\n\nPour la deuxième banque de données, je fais appel à celle produite par *Gapminder* qui se nomme *Life Expectancy at Birth*. Celle-ci seront re-téléchargé pour une mise à jour à tous les mois.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl_gapminder <-  \"https://docs.google.com/spreadsheets/d/1RheSon1-q4vFc3AGyupVPH6ptEByE-VtnjOCselU0PE/edit#gid=176703676\"\nsheet_gapminder <- gsheet2tbl(url_gapminder)\nbase_path <- path(\"data\", \"raw\")\nfname_gap <- paste(today(), \"gapm.csv\", sep = \"_\")\nfpath_gap <- path(base_path, fname_gap)\nwrite.csv(sheet_gapminder, \"sheet_gapminder.csv\")\n```\n:::\n\n\n### Création d'une variable\n\nNous allons créer la variable continent pour les deux banques de données pour faciliter les analyses.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_co2 <- data_co2 |> \n    mutate(continent = countrycode(sourcevar = data_co2$country,\n                                   origin = \"country.name\",\n                                   destination = \"continent\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in countrycode_convert(sourcevar = sourcevar, origin = origin, destination = dest, : Some values were not matched unambiguously: Africa, Africa (GCP), Antarctica, Asia, Asia (excl. China and India), Asia (GCP), Central America (GCP), Europe, Europe (excl. EU-27), Europe (excl. EU-28), Europe (GCP), European Union (27), European Union (27) (GCP), European Union (28), French Equatorial Africa (GCP), French West Africa (GCP), High-income countries, International transport, Kosovo, Leeward Islands (GCP), Low-income countries, Lower-middle-income countries, Micronesia (country), Middle East (GCP), Non-OECD (GCP), North America, North America (GCP), Oceania, Oceania (GCP), OECD (GCP), Ryukyu Islands (GCP), South America, South America (GCP), St. Kitts-Nevis-Anguilla (GCP), Timor, Upper-middle-income countries, World\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in countrycode_convert(sourcevar = sourcevar, origin = origin, destination = dest, : Some strings were matched more than once, and therefore set to <NA> in the result: Asia (excl. China and India),Asia,Asia; St. Kitts-Nevis-Anguilla (GCP),Americas,Americas\n```\n:::\n\n```{.r .cell-code}\nsheet_gapminder <- sheet_gapminder |> \n    mutate(continent = countrycode(sourcevar = sheet_gapminder$name,\n                                   origin = \"country.name\",\n                                   destination = \"continent\"))\n```\n:::\n\n\n### Recoder les variables\n\nLes variables des deux banques de données n'ont pas le même nom, on va donc changer la variable *name* de gapminder par *country*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsheet_gapminder <- sheet_gapminder |> \n    rename(country = name,\n           year = time)\n```\n:::\n\n\n## Exporter les données\n\nExporter les données qui sont traités dans le dossier data/processed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(data_co2,file = \"data/processed/data_co2.csv\")\nwrite_csv(sheet_gapminder, file = \"data/processed/sheet_gapminder.csv\")\n```\n:::\n",
    "supporting": [
      "import_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}